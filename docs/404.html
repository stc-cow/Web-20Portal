<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirectingâ€¦</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
      (function () {
        const segments = window.location.pathname.split('/').filter(Boolean);
        const repoSegment = segments.length > 0 ? segments[0] : '';
        const rest = segments.slice(1).join('/');
        const basePath = repoSegment ? `/${repoSegment}/` : '/';
        const search = window.location.search || '';
        const trailingHash = window.location.hash || '';

        if (!rest) {
          window.location.replace(`${window.location.origin}${basePath}`);
          return;
        }

        const finalUrl = `${window.location.origin}${basePath}#/${rest}${search}${trailingHash}`;
        window.location.replace(finalUrl);
    <script>
      (function () {
        const storageKey = 'spa-redirect';
        const redirectUrl = sessionStorage.getItem(storageKey);
        if (redirectUrl) {
          sessionStorage.removeItem(storageKey);
          window.location.replace(redirectUrl);
          return;
        }

        const segments = window.location.pathname.split('/').filter(Boolean);
        const repoSegment = segments.length > 0 ? segments[0] : '';
        const basePath = repoSegment ? `/${repoSegment}/` : '/';
        const rest = segments.slice(1).join('/');
        const targetPath = rest ? `${basePath}${rest}` : basePath;
        const search = window.location.search || '';
        const hash = window.location.hash || '';

        sessionStorage.setItem(
          storageKey,
          `${window.location.origin}${targetPath}${search}${hash}`,
        );
        window.location.replace(`${window.location.origin}${basePath}`);
      })();
    </script>
  </head>
  <body></body>
</html>
